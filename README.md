sptrans
====================

A SPTrans nasceu em 1995 e é hoje responsável por quase todo o sistema de
transporte no município de São Paulo. Como São Paulo é o município mais
populoso do Brasil (e o 
[sétimo do mundo!](http://pt.wikipedia.org/wiki/Lista_das_cidades_mais_populosas_do_mundo))
, o desafio é bem grande.

A SPTrans também mantém uma das API's mais divertidas de São Paulo, o OlhoVivo.
Com essa API é possível extrair informações em tempo real da localização
de todos os ônibus, previsões de chegada, etc. Além disso, ela utiliza os
padrões [GTFS](https://developers.google.com/transit/gtfs/reference?hl=pt-br) 
para organizar informações sobre as linhas ativas, os pontos de ônibus e tudo
mais.

Hoje em dia, temos diversos aplicativos mobile e sites que usam essa API.
Faça uma busca por "sptrans" na Google Play, por exemplo, e verá muitos
apps que ajudam a planejar rotas de ônibus.

E por que não brincar com essas informações no R? Bom, pensando nisso fiz esse
pacote, que ajuda a configurar a API, baixar os dados da SPTrans em tempo real
e criar alguns gráficos básicos usando o pacote 
[`leaflet`](https://rstudio.github.io/leaflet/) do RStudio.

## Instalando o pacote

O pacote ainda não está disponível no CRAN. Para instalar via GitHub, você
precisará instalar o pacote `devtools` e então rodar


```r
devtools::install_github('jtrecenti/spgtfs') # dados GTFS
devtools::install_github('jtrecenti/sptrans') # funcoes e API
```

Carregue o pacote com o comando `library` 


```r
library(spgtfs)
library(sptrans)
```

## Configurando a API OlhoVivo

Para acessar a API OlhoVivo, você precisará primeiro de um _token_ de acesso,
que é uma sequência de letras e números geradas aleatoriamente pela SPTrans,
por exemplo:

```
233f343e2ad2a3bf483eae00c316cfdd516c3xxxd21b6a3e916645877e137b6f
```

Para isso, siga os seguintes passos

1. Acesse a [área de desenvolvedores da SPTrans](http://www.sptrans.com.br/desenvolvedores/Cadastro.aspx) 
e crie uma conta.  
2. Quando conseguir logar, acesse a página "Meus Aplicativos" da API Olho Vivo,
e clique em "Adicionar novo aplicativo".  
3. Preencha o formulário com suas informações. Só é necessário preencher o nome
e a descrição. Você pode escolher o nome que quiser. Se tudo der certo, você 
receberá um token de acesso.  
4. Vá para a pasta "home" de seu usuário (se não souber o que é isso, rode
`normalizePath("~/")` no R.).
5. Crie/edite um arquivo chamado `.Renviron` (isso mesmo, com um ponto na 
frente) e coloque o conteúdo

```
OLHOVIVO_PAT=seu_token_aqui

```

Por exemplo:

```
OLHOVIVO_PAT=233f343e2ad2a3bf483eae00c316cfdd516c3xxxd21b6a3e916645877e137b6f

```

**OBS:** O arquivo `.Renviron` deve ter uma linha vazia no final. Por exemplo,
se seu arquivo contém só o token da API OlhoVivo, seu 

6. Reinicie sua sessão do R. Um jeito fácil de fazer isso no RStudio é pelo
atalho `Ctrl + Shift + F10`.

**Testando se está OK:** O token é acessado pela função `Sys.getenv()` do R.
Após realizar os passos descritos, experimente rodar 
`Sys.getenv('OLHOVIVO_PAT')`. Eu adicionei uma função no pacote chamada
`check_olhovivo()` que faz exatamente isso. Se tudo estiver certo, a função 
imprimirá o seu token e você poderá partir para o próximo passo!

Se encontrar algum problema, acesse 
[essa página](https://github.com/hadley/httr/blob/master/vignettes/api-packages.Rmd#appendix-api-key-best-practices)
, que foi utilizada como base para criar este pacote.


## Dados do GTFS

Antes de sair baixando informações usando a API OlhoVivo, vamos ver um pouco
mais a fundo o que é essa GTFS, para que serve, e como utilizar esses dados
no nosso pacote. 

A Especificação Geral sobre Feeds de Transporte Público é uma padronização
de arquivos para que qualquer lugar do mundo possa divulgar informações
de transporte público num formato único. Isso possibilita empresas como a
[Google](www.google.com) e o aplicativo [Moovit](http://moovitapp.com/pt-br/)
a juntar as informações de vários lugares sem muito trabalho. O padrão
também ajuda os responsáveis pela obteção dos dados, pois é mais fácil
seguir um guia do que planejar a estrutura de dados do zero.

Os dados e a documentação da GTFS estão no pacote `spgtfs`. Após carregar os
dados, é possível visualizar os bds disponíveis em `data(package = 'spgtfs')`. 
Se quiser, por exemplo, verificar a documentação de `shapes`, rode `?shapes`.
É recomendável que o pacote `dplyr` seja carregado antes de trabalhar com
esses dados, para não correr o risco de imprimir dez mil linhas no console.

Vejamos, por exemplo, as linhas de ônibus contidas em `trips`:


```r
head(trips, 10)
```

```
## Source: local data frame [10 x 6]
## 
##    route_id service_id   trip_id            trip_headsign direction_id
## 1   1015-10        USD 1015-10-0    Terminal Jd. Britania            0
## 2   1016-10        USD 1016-10-0             Center Norte            0
## 3   1016-10        USD 1016-10-1       Cemiterio Do Horto            1
## 4   1017-10        USD 1017-10-0               Vila Iorio            0
## 5   1017-10        USD 1017-10-1                    Perus            1
## 6   1018-10        USD 1018-10-0            Metrô Santana            0
## 7   1018-10        USD 1018-10-1                Vila Rosa            1
## 8   1021-10        US_ 1021-10-0        Terminal Pirituba            0
## 9   1021-10        US_ 1021-10-1        Cohab Brasilândia            1
## 10  1024-10        USD 1024-10-0 Conexão Petrônio Portela            0
## Variables not shown: shape_id (chr)
```

### Brincando com o GTFS

As informações do GTFS, por si só, já são bastante úteis.

- Com `trips`, sabemos todas as linhas de ônibus. 
- Com `stops`, sabemos todas as paradas. 
- Com `stop_times`, conseguimos descobrir quais linhas passam em quais pontos.
- Com `shapes`, sabemos todos os trajetos no mapa.

Com a ajuda do pacote `ggmap`, é possível utilizar a API do google para obter 
coordenadas geográficas a partir de endereços. 

Vamos às funções do pacote!

A função `nearby_stops` procura pontos de ônibus próximos a um endereço 
informado. Os pontos próximos são identificados dentro de um raio que por 
padrão é de 300 metros.

Veja alguns exemplos:

Utilização básica.


```r
nearby_stops('Avenida Paulista, 1079')
```

```
## Information from URL : http://maps.googleapis.com/maps/api/geocode/json?address=Avenida+Paulista,+1079&sensor=false
```

```
## Source: local data frame [5 x 9]
## 
##     stop_id                   stop_name
## 1  70002856 R. S. Carlos Do Pinhal, 638
## 2 440016923           Av. Paulista, 901
## 3    706304           Av. Paulista, 900
## 4  70016916          Av. Paulista, 1374
## 5 440015046             Al. Santos, 815
## Variables not shown: stop_desc (chr), stop_lat (dbl), stop_lon (dbl),
##   distance (dbl), my_lon (dbl), my_lat (dbl), radius (dbl)
```

Neste exemplo, não encontramos nenhum ponto de ônibus.


```r
nearby_stops('Avenida Paulista, 1079', radius = 100)
```

Também é possível informar latitude e longitude.


```r
nearby_stops(lon = -46.6527, lat = -23.5648)
```

```
## Source: local data frame [5 x 9]
## 
##     stop_id                   stop_name
## 1  70002856 R. S. Carlos Do Pinhal, 638
## 2 440016923           Av. Paulista, 901
## 3    706304           Av. Paulista, 900
## 4  70016916          Av. Paulista, 1374
## 5 440015046             Al. Santos, 815
## Variables not shown: stop_desc (chr), stop_lat (dbl), stop_lon (dbl),
##   distance (dbl), my_lon (dbl), my_lat (dbl), radius (dbl)
```

A função `draw_stops` desenha o ponto informado, o raio informado, e os pontos
de ônibus próximos.


```r
nearby_stops('Avenida Paulista, 1079', 200) %>% draw_stops()
```

<!--html_preserve--><div id="htmlwidget-6841" style="width:504px;height:504px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-6841">{"x":{"calls":[{"method":"tileLayer","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>"}]},{"method":"circle","args":[-23.5647925,-46.652729,200,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"marker","args":[-23.5647925,-46.652729,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[[-23.563303,-23.565789],[-46.652079,-46.651451],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]}],"limits":{"lat":[-23.565789,-23.563303],"lng":[-46.652729,-46.651451]}},"evals":["calls.3.args.3.icon"]}</script><!--/html_preserve-->

A função `search_path` procura possíveis caminhos de um ponto até outro ponto,
ou seja, procura linhas de ônibus (trips) que passem próximos a duas 
localizações informadas. Até o momento, ainda não é possível identificar 
caminhos com utilização de duas linhas distintas.


```r
search_path(end1 = 'Avenida 9 de Julho, 2000, São Paulo', 
            end2 = 'Av. Pres. Juscelino Kubitschek, 500, São Paulo')
```

```
## Source: local data frame [2 x 17]
## 
##   route_id service_id   trip_id trip_headsign direction_id shape_id vale
## 1  106A-10        USD 106A-10-0    Itaim Bibi            0    55806 TRUE
## 2  6401-10        U__ 6401-10-1    V. Olimpia            1    56520 TRUE
## Variables not shown: stop_id1 (chr), stop_id2 (chr), stop_seq1 (int),
##   stop_seq2 (int), lon1 (dbl), lat1 (dbl), lon2 (dbl), lat2 (dbl), radius1
##   (dbl), radius2 (dbl)
```

A função `draw_paths` desenha os dois pontos informados, os raios informados,
os pontos de ônibus válidos e os caminhos possíveis (no máximo oito).


```r
search_path(end1 = 'Avenida 9 de Julho, 2000, São Paulo', 
            end2 = 'Av. Pres. Juscelino Kubitschek, 500, São Paulo') %>%
  draw_paths()
```

<!--html_preserve--><div id="htmlwidget-2104" style="width:504px;height:504px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-2104">{"x":{"calls":[{"method":"tileLayer","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>"}]},{"method":"circle","args":[-23.5585974,-46.6539853,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"circle","args":[-23.5870167,-46.6746184,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"marker","args":[-23.5585974,-46.6539853,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.5870167,-46.6746184,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.584721,-46.675209,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.625926,-46.626164,-46.626307,-46.626412,-46.626382,-46.626371,-46.62631,-46.62625,-46.62625,-46.626234,-46.626201,-46.626206,-46.6262,-46.626195,-46.626208,-46.626205,-46.626205,-46.626198,-46.62619,-46.626158,-46.62843,-46.628837,-46.628933,-46.629031,-46.629177,-46.629385,-46.629451,-46.629552,-46.629694,-46.629799,-46.629901,-46.630033,-46.630225,-46.6304,-46.630495,-46.630538,-46.630537,-46.630513,-46.630462,-46.630411,-46.630253,-46.63006,-46.629902,-46.629807,-46.629771,-46.629759,-46.62977,-46.629817,-46.629997,-46.630034,-46.630076,-46.630101,-46.630162,-46.630211,-46.630272,-46.630327,-46.630339,-46.630356,-46.630361,-46.630554,-46.630782,-46.630826,-46.631034,-46.631136,-46.63125,-46.631317,-46.631406,-46.631449,-46.631538,-46.63176,-46.631991,-46.63222,-46.6323,-46.632352,-46.632425,-46.63291,-46.632947,-46.633313,-46.633658,-46.633684,-46.633897,-46.634532,-46.63473,-46.634911,-46.634939,-46.635247,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671563,-46.671854,-46.671986,-46.67218,-46.672401,-46.672614,-46.672708,-46.672772,-46.672943,-46.673084,-46.673252,-46.674144,-46.674738,-46.675517,-46.67533,-46.674884,-46.674601,-46.674226,-46.674008,-46.673822,-46.673728,-46.673486,-46.675513,-46.676594,-46.677592,-46.677281,-46.677003,-46.678093,-46.678993,-46.679936,-46.68101,-46.681826,-46.682102,-46.681969,-46.681532,-46.68147,-46.68099,-46.680847,-46.680626,-46.680606,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.689688,-46.689593,-46.689315,-46.689078,-46.689015,-46.689012,-46.689008,-46.688933,-46.688651,-46.688581,-46.688231,-46.688075,-46.688065,-46.688031],"lat":[-23.502997,-23.502946,-23.502916,-23.502893,-23.503981,-23.504157,-23.505211,-23.506057,-23.50639,-23.506881,-23.507462,-23.507598,-23.508101,-23.508236,-23.5093,-23.50997,-23.510581,-23.510698,-23.511098,-23.511472,-23.511492,-23.511501,-23.51152,-23.511553,-23.511632,-23.513072,-23.513299,-23.513462,-23.513484,-23.513505,-23.513555,-23.513635,-23.513797,-23.51404,-23.514206,-23.51432,-23.514459,-23.514632,-23.514841,-23.514944,-23.515122,-23.515277,-23.515371,-23.515485,-23.515547,-23.515632,-23.515753,-23.516194,-23.517412,-23.517771,-23.51818,-23.518394,-23.518764,-23.519134,-23.519583,-23.519925,-23.520256,-23.52033,-23.5207,-23.52172,-23.522865,-23.523086,-23.524086,-23.524525,-23.525374,-23.52597,-23.526528,-23.526693,-23.527482,-23.52873,-23.529555,-23.530335,-23.530545,-23.530714,-23.530993,-23.532244,-23.532378,-23.53386,-23.534985,-23.535074,-23.535755,-23.537851,-23.5385,-23.539095,-23.53923,-23.540239,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576947,-23.577008,-23.577028,-23.57704,-23.577024,-23.576992,-23.576975,-23.576969,-23.576961,-23.576975,-23.577007,-23.577536,-23.577861,-23.578315,-23.57855,-23.579895,-23.580785,-23.581963,-23.582651,-23.583241,-23.583532,-23.584282,-23.584838,-23.585129,-23.585394,-23.586426,-23.587291,-23.587584,-23.587833,-23.588085,-23.588374,-23.5886,-23.588662,-23.589087,-23.590455,-23.590624,-23.592451,-23.592935,-23.593696,-23.593802,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.594032,-23.593905,-23.593501,-23.593232,-23.592685,-23.592406,-23.592069,-23.591804,-23.590912,-23.590713,-23.589698,-23.589295,-23.589272,-23.589194]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC0000","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.588574,-46.676052,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.634657,-46.634723,-46.634962,-46.635034,-46.635314,-46.635416,-46.635529,-46.635935,-46.636064,-46.63615,-46.63619,-46.636245,-46.636285,-46.636312,-46.636423,-46.636624,-46.63666,-46.636578,-46.636544,-46.636346,-46.636205,-46.635825,-46.635667,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670619,-46.670452,-46.670449,-46.670124,-46.670094,-46.67005,-46.670073,-46.670138,-46.670203,-46.670282,-46.670366,-46.670718,-46.671342,-46.671786,-46.672347,-46.67296,-46.673076,-46.673718,-46.67466,-46.675032,-46.67598,-46.676101,-46.67642,-46.677528,-46.678443,-46.679188,-46.680436,-46.680382,-46.680227,-46.680094,-46.679956,-46.679806,-46.679652,-46.679382,-46.679212,-46.679124,-46.680167,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.690692,-46.689511,-46.688174,-46.687797,-46.686888,-46.6864,-46.685427,-46.684448,-46.683465,-46.682768,-46.681489,-46.681058,-46.679239,-46.677606,-46.67708,-46.676239,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676534,-46.676626,-46.676687,-46.676754,-46.676826,-46.676886,-46.676934,-46.677012,-46.677523,-46.67763,-46.678115,-46.678748,-46.679547,-46.679817,-46.679758,-46.680199,-46.680315,-46.6804,-46.680418,-46.680427,-46.680424,-46.680416,-46.680404,-46.680378,-46.680356,-46.680337,-46.680313,-46.680272,-46.68023,-46.680188,-46.680118,-46.680059],"lat":[-23.53557,-23.535554,-23.535496,-23.535478,-23.535409,-23.535382,-23.535906,-23.537868,-23.53857,-23.538848,-23.539,-23.539227,-23.53944,-23.539617,-23.540183,-23.541313,-23.541523,-23.541606,-23.541642,-23.542911,-23.542687,-23.541591,-23.541125,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.581723,-23.583253,-23.58329,-23.583391,-23.583723,-23.584027,-23.584217,-23.584142,-23.584114,-23.584104,-23.58413,-23.585017,-23.585187,-23.585359,-23.585597,-23.585943,-23.586012,-23.586407,-23.587493,-23.587846,-23.588654,-23.588787,-23.589061,-23.589373,-23.589614,-23.589822,-23.590165,-23.590333,-23.590812,-23.591239,-23.591658,-23.592119,-23.592619,-23.593452,-23.593983,-23.594256,-23.594543,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.595691,-23.596227,-23.596843,-23.597019,-23.597443,-23.59767,-23.598116,-23.598568,-23.599022,-23.599343,-23.599929,-23.600128,-23.600972,-23.601728,-23.601971,-23.602359,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.607905,-23.607974,-23.608003,-23.608023,-23.608036,-23.608032,-23.608017,-23.607977,-23.607654,-23.607544,-23.607128,-23.605656,-23.604089,-23.603695,-23.603056,-23.602611,-23.602785,-23.602905,-23.602943,-23.602976,-23.603022,-23.603049,-23.603071,-23.603103,-23.603125,-23.603138,-23.603151,-23.603164,-23.603166,-23.603163,-23.603151,-23.603138]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC9900","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]}],"limits":{"lat":[-23.608036,-23.502893],"lng":[-46.690692,-46.625926]},"fitBounds":[-23.5585974,-46.6539853,-23.5870167,-46.6746184]},"evals":["calls.5.args.3.icon","calls.6.args.3.icon","calls.8.args.3.icon","calls.9.args.3.icon"]}</script><!--/html_preserve-->

Outro exemplo, aumentando o raio 2.


```r
search_path(end1 = 'Avenida 9 de Julho, 2000, São Paulo', 
            end2 = 'Av. Pres. Juscelino Kubitschek, 500, São Paulo',
            radius2 = 500) %>%
  dplyr::filter(!stringr::str_detect(trip_headsign, 
                                     'Santana|Luz|Band|Armenia|Pedro Ii')) %>%
  # Obs: tirei manualmente as linhas que vão para o lado oposto ao que eu
  # quero, isto é, que vão da JK até a 9 de Julho.
  # Esse é um problema conhecido do pacote.
  draw_paths()
```

<!--html_preserve--><div id="htmlwidget-982" style="width:504px;height:504px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-982">{"x":{"calls":[{"method":"tileLayer","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>"}]},{"method":"circle","args":[-23.5585974,-46.6539853,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"circle","args":[-23.5870167,-46.6746184,500,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"marker","args":[-23.5585974,-46.6539853,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.5870167,-46.6746184,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.584721,-46.675209,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.625926,-46.626164,-46.626307,-46.626412,-46.626382,-46.626371,-46.62631,-46.62625,-46.62625,-46.626234,-46.626201,-46.626206,-46.6262,-46.626195,-46.626208,-46.626205,-46.626205,-46.626198,-46.62619,-46.626158,-46.62843,-46.628837,-46.628933,-46.629031,-46.629177,-46.629385,-46.629451,-46.629552,-46.629694,-46.629799,-46.629901,-46.630033,-46.630225,-46.6304,-46.630495,-46.630538,-46.630537,-46.630513,-46.630462,-46.630411,-46.630253,-46.63006,-46.629902,-46.629807,-46.629771,-46.629759,-46.62977,-46.629817,-46.629997,-46.630034,-46.630076,-46.630101,-46.630162,-46.630211,-46.630272,-46.630327,-46.630339,-46.630356,-46.630361,-46.630554,-46.630782,-46.630826,-46.631034,-46.631136,-46.63125,-46.631317,-46.631406,-46.631449,-46.631538,-46.63176,-46.631991,-46.63222,-46.6323,-46.632352,-46.632425,-46.63291,-46.632947,-46.633313,-46.633658,-46.633684,-46.633897,-46.634532,-46.63473,-46.634911,-46.634939,-46.635247,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671563,-46.671854,-46.671986,-46.67218,-46.672401,-46.672614,-46.672708,-46.672772,-46.672943,-46.673084,-46.673252,-46.674144,-46.674738,-46.675517,-46.67533,-46.674884,-46.674601,-46.674226,-46.674008,-46.673822,-46.673728,-46.673486,-46.675513,-46.676594,-46.677592,-46.677281,-46.677003,-46.678093,-46.678993,-46.679936,-46.68101,-46.681826,-46.682102,-46.681969,-46.681532,-46.68147,-46.68099,-46.680847,-46.680626,-46.680606,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.689688,-46.689593,-46.689315,-46.689078,-46.689015,-46.689012,-46.689008,-46.688933,-46.688651,-46.688581,-46.688231,-46.688075,-46.688065,-46.688031],"lat":[-23.502997,-23.502946,-23.502916,-23.502893,-23.503981,-23.504157,-23.505211,-23.506057,-23.50639,-23.506881,-23.507462,-23.507598,-23.508101,-23.508236,-23.5093,-23.50997,-23.510581,-23.510698,-23.511098,-23.511472,-23.511492,-23.511501,-23.51152,-23.511553,-23.511632,-23.513072,-23.513299,-23.513462,-23.513484,-23.513505,-23.513555,-23.513635,-23.513797,-23.51404,-23.514206,-23.51432,-23.514459,-23.514632,-23.514841,-23.514944,-23.515122,-23.515277,-23.515371,-23.515485,-23.515547,-23.515632,-23.515753,-23.516194,-23.517412,-23.517771,-23.51818,-23.518394,-23.518764,-23.519134,-23.519583,-23.519925,-23.520256,-23.52033,-23.5207,-23.52172,-23.522865,-23.523086,-23.524086,-23.524525,-23.525374,-23.52597,-23.526528,-23.526693,-23.527482,-23.52873,-23.529555,-23.530335,-23.530545,-23.530714,-23.530993,-23.532244,-23.532378,-23.53386,-23.534985,-23.535074,-23.535755,-23.537851,-23.5385,-23.539095,-23.53923,-23.540239,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576947,-23.577008,-23.577028,-23.57704,-23.577024,-23.576992,-23.576975,-23.576969,-23.576961,-23.576975,-23.577007,-23.577536,-23.577861,-23.578315,-23.57855,-23.579895,-23.580785,-23.581963,-23.582651,-23.583241,-23.583532,-23.584282,-23.584838,-23.585129,-23.585394,-23.586426,-23.587291,-23.587584,-23.587833,-23.588085,-23.588374,-23.5886,-23.588662,-23.589087,-23.590455,-23.590624,-23.592451,-23.592935,-23.593696,-23.593802,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.594032,-23.593905,-23.593501,-23.593232,-23.592685,-23.592406,-23.592069,-23.591804,-23.590912,-23.590713,-23.589698,-23.589295,-23.589272,-23.589194]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC0000","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559846,-46.654687,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.585335,-46.670843,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.640044,-46.639977,-46.639927,-46.639866,-46.639779,-46.639727,-46.63948,-46.639428,-46.639335,-46.639267,-46.639136,-46.639114,-46.639129,-46.639297,-46.640445,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670546,-46.670478,-46.670331,-46.670316,-46.670276,-46.670223,-46.670281,-46.670545,-46.670738,-46.67089,-46.671178,-46.67154,-46.671789,-46.672116,-46.672441,-46.672584,-46.672655,-46.672747,-46.672798,-46.672882,-46.67299,-46.673022,-46.673102,-46.673157,-46.673243,-46.673414,-46.673688,-46.673918,-46.674008,-46.674008,-46.673991,-46.673953,-46.673931,-46.673932,-46.673977,-46.674005,-46.674119,-46.674293,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676475,-46.67659,-46.676672,-46.677141,-46.677216,-46.677269,-46.677325,-46.677455,-46.677559,-46.677836,-46.678185,-46.678711,-46.679276,-46.679592,-46.679916,-46.680516,-46.681027,-46.681193,-46.681326,-46.681464,-46.681659,-46.681802,-46.682,-46.682407,-46.682664,-46.682807,-46.682981,-46.68305,-46.683107,-46.683224,-46.683463,-46.683598,-46.683682,-46.683731,-46.683782,-46.683818,-46.683844,-46.683879,-46.683884,-46.68409,-46.684176,-46.684383,-46.684473,-46.685008,-46.686035,-46.687308,-46.687432,-46.688484,-46.689053,-46.689591,-46.689762,-46.690068,-46.690553,-46.69137,-46.691705,-46.692701,-46.693089,-46.693879,-46.694473,-46.695039,-46.695621,-46.696205,-46.696578,-46.696806,-46.697077,-46.697532,-46.697667,-46.697735,-46.698015,-46.698485,-46.699716,-46.700081,-46.700958,-46.701087,-46.701206,-46.701261,-46.701356,-46.701448,-46.702266,-46.702637,-46.702953,-46.703907,-46.704031,-46.704901,-46.705494,-46.705737,-46.705882,-46.706101,-46.706453,-46.707076,-46.707984,-46.708363,-46.708799,-46.711393,-46.71191,-46.712748,-46.713185,-46.71375,-46.71389,-46.714312,-46.715024,-46.716391,-46.717521,-46.718275,-46.719313,-46.722758,-46.723179,-46.723436,-46.724119,-46.725408,-46.725563,-46.726272,-46.726831,-46.727633,-46.728045,-46.728407,-46.728808,-46.729005,-46.730087,-46.730826,-46.731646,-46.731764,-46.732361,-46.732697,-46.732962,-46.733308,-46.733374,-46.73359,-46.733733,-46.733795,-46.733925,-46.733975,-46.73405,-46.734111,-46.734169,-46.734255,-46.734319,-46.734431,-46.734473,-46.734519,-46.734564,-46.734596,-46.734634,-46.734611,-46.734544,-46.734471,-46.734433,-46.73439,-46.734306,-46.734256,-46.73419,-46.734129,-46.734029,-46.733973,-46.733879,-46.733836,-46.733727,-46.733604,-46.733502,-46.733311,-46.733247,-46.733,-46.732827,-46.732741,-46.732603,-46.73252],"lat":[-23.549359,-23.549352,-23.549347,-23.54934,-23.549331,-23.549325,-23.549297,-23.549291,-23.54928,-23.549272,-23.549258,-23.549161,-23.549053,-23.548945,-23.549093,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.58161,-23.582186,-23.583162,-23.583271,-23.583646,-23.584058,-23.584205,-23.584748,-23.585167,-23.585541,-23.586157,-23.587051,-23.587905,-23.589026,-23.590097,-23.590656,-23.590971,-23.591649,-23.592235,-23.592899,-23.593863,-23.594327,-23.594843,-23.59524,-23.595634,-23.596241,-23.596696,-23.597193,-23.597481,-23.597757,-23.597916,-23.598123,-23.598536,-23.598745,-23.600012,-23.600453,-23.60109,-23.602114,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.608049,-23.608308,-23.608521,-23.609937,-23.610209,-23.610352,-23.610507,-23.610866,-23.611162,-23.611894,-23.612943,-23.613878,-23.614676,-23.615179,-23.615618,-23.616481,-23.617239,-23.61735,-23.617416,-23.617479,-23.617612,-23.617725,-23.617924,-23.618372,-23.618611,-23.618799,-23.619089,-23.619216,-23.619335,-23.619581,-23.620019,-23.620207,-23.620329,-23.620416,-23.620557,-23.620739,-23.620948,-23.621206,-23.621339,-23.621677,-23.621821,-23.622129,-23.622232,-23.622936,-23.624441,-23.626212,-23.626396,-23.627873,-23.628649,-23.6294,-23.629631,-23.630056,-23.630739,-23.631662,-23.631965,-23.632868,-23.633297,-23.63416,-23.634805,-23.635473,-23.636132,-23.636781,-23.637525,-23.637896,-23.63829,-23.638973,-23.639179,-23.639293,-23.639791,-23.640554,-23.642575,-23.642905,-23.643558,-23.64364,-23.643689,-23.643717,-23.643759,-23.643784,-23.644257,-23.644471,-23.644665,-23.645243,-23.645308,-23.645842,-23.64626,-23.646398,-23.646435,-23.646463,-23.646444,-23.646388,-23.646271,-23.646239,-23.646152,-23.645566,-23.64549,-23.645371,-23.645296,-23.645195,-23.645171,-23.645131,-23.645051,-23.644904,-23.644841,-23.644828,-23.644831,-23.644749,-23.644747,-23.64474,-23.644708,-23.644629,-23.644612,-23.644533,-23.64447,-23.644396,-23.644345,-23.644307,-23.644295,-23.644303,-23.644228,-23.64405,-23.643825,-23.643798,-23.643938,-23.643934,-23.64392,-23.643902,-23.643898,-23.643887,-23.643879,-23.643875,-23.643867,-23.643864,-23.64386,-23.643855,-23.64385,-23.643843,-23.643838,-23.643829,-23.643825,-23.643818,-23.643807,-23.643785,-23.643734,-23.643685,-23.64364,-23.643625,-23.643625,-23.643628,-23.643635,-23.643638,-23.643641,-23.643647,-23.643655,-23.64366,-23.643669,-23.643673,-23.643682,-23.643691,-23.6437,-23.643716,-23.643722,-23.643744,-23.643757,-23.643763,-23.643775,-23.643782]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC9900","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/3-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.588574,-46.676052,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/3-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.634657,-46.634723,-46.634962,-46.635034,-46.635314,-46.635416,-46.635529,-46.635935,-46.636064,-46.63615,-46.63619,-46.636245,-46.636285,-46.636312,-46.636423,-46.636624,-46.63666,-46.636578,-46.636544,-46.636346,-46.636205,-46.635825,-46.635667,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670619,-46.670452,-46.670449,-46.670124,-46.670094,-46.67005,-46.670073,-46.670138,-46.670203,-46.670282,-46.670366,-46.670718,-46.671342,-46.671786,-46.672347,-46.67296,-46.673076,-46.673718,-46.67466,-46.675032,-46.67598,-46.676101,-46.67642,-46.677528,-46.678443,-46.679188,-46.680436,-46.680382,-46.680227,-46.680094,-46.679956,-46.679806,-46.679652,-46.679382,-46.679212,-46.679124,-46.680167,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.690692,-46.689511,-46.688174,-46.687797,-46.686888,-46.6864,-46.685427,-46.684448,-46.683465,-46.682768,-46.681489,-46.681058,-46.679239,-46.677606,-46.67708,-46.676239,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676534,-46.676626,-46.676687,-46.676754,-46.676826,-46.676886,-46.676934,-46.677012,-46.677523,-46.67763,-46.678115,-46.678748,-46.679547,-46.679817,-46.679758,-46.680199,-46.680315,-46.6804,-46.680418,-46.680427,-46.680424,-46.680416,-46.680404,-46.680378,-46.680356,-46.680337,-46.680313,-46.680272,-46.68023,-46.680188,-46.680118,-46.680059],"lat":[-23.53557,-23.535554,-23.535496,-23.535478,-23.535409,-23.535382,-23.535906,-23.537868,-23.53857,-23.538848,-23.539,-23.539227,-23.53944,-23.539617,-23.540183,-23.541313,-23.541523,-23.541606,-23.541642,-23.542911,-23.542687,-23.541591,-23.541125,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.581723,-23.583253,-23.58329,-23.583391,-23.583723,-23.584027,-23.584217,-23.584142,-23.584114,-23.584104,-23.58413,-23.585017,-23.585187,-23.585359,-23.585597,-23.585943,-23.586012,-23.586407,-23.587493,-23.587846,-23.588654,-23.588787,-23.589061,-23.589373,-23.589614,-23.589822,-23.590165,-23.590333,-23.590812,-23.591239,-23.591658,-23.592119,-23.592619,-23.593452,-23.593983,-23.594256,-23.594543,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.595691,-23.596227,-23.596843,-23.597019,-23.597443,-23.59767,-23.598116,-23.598568,-23.599022,-23.599343,-23.599929,-23.600128,-23.600972,-23.601728,-23.601971,-23.602359,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.607905,-23.607974,-23.608003,-23.608023,-23.608036,-23.608032,-23.608017,-23.607977,-23.607654,-23.607544,-23.607128,-23.605656,-23.604089,-23.603695,-23.603056,-23.602611,-23.602785,-23.602905,-23.602943,-23.602976,-23.603022,-23.603049,-23.603071,-23.603103,-23.603125,-23.603138,-23.603151,-23.603164,-23.603166,-23.603163,-23.603151,-23.603138]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#66CC00","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/4-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.585335,-46.670843,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/4-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.639687,-46.639596,-46.63954,-46.639412,-46.639352,-46.639322,-46.639273,-46.639248,-46.639224,-46.63916,-46.639104,-46.639039,-46.63902,-46.639035,-46.639068,-46.639091,-46.639093,-46.63911,-46.639112,-46.639114,-46.639129,-46.639297,-46.640445,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670546,-46.670478,-46.670331,-46.670316,-46.670276,-46.670223,-46.670281,-46.670545,-46.670738,-46.67089,-46.671178,-46.67154,-46.671789,-46.672116,-46.672441,-46.672584,-46.672655,-46.672747,-46.672798,-46.672882,-46.67299,-46.673022,-46.673102,-46.673157,-46.673243,-46.673414,-46.673688,-46.673918,-46.674008,-46.674008,-46.673991,-46.673953,-46.673931,-46.673932,-46.673977,-46.674005,-46.674119,-46.674293,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676475,-46.67659,-46.676672,-46.677141,-46.677216,-46.677269,-46.677325,-46.677455,-46.677559,-46.677836,-46.678185,-46.678711,-46.679807,-46.680745,-46.6814,-46.682996,-46.68341,-46.683604,-46.683798,-46.684181,-46.684608,-46.686132,-46.687698,-46.68825,-46.688698,-46.689268,-46.690707,-46.691105,-46.691476,-46.691667,-46.692052,-46.69218,-46.692397,-46.692712,-46.692995,-46.693056,-46.693331,-46.693513,-46.69371,-46.694023,-46.694346,-46.694529,-46.694762,-46.695124,-46.695327,-46.695502,-46.695691,-46.695815,-46.695898,-46.696118,-46.696224,-46.69662,-46.696663,-46.696962,-46.697059,-46.697414,-46.697877,-46.698012,-46.698116,-46.698383,-46.698588,-46.698666,-46.698506,-46.69836,-46.69818,-46.697604,-46.69665,-46.6965,-46.696457,-46.696385,-46.696349,-46.69605,-46.695958,-46.695083,-46.694837,-46.694676,-46.694484,-46.692517,-46.692077,-46.691646,-46.691295,-46.691027,-46.690625,-46.690033,-46.68922,-46.688769,-46.688478,-46.688249,-46.68811,-46.687942,-46.687862,-46.687432,-46.688484,-46.689053,-46.689591,-46.689762,-46.690068,-46.690553,-46.69137,-46.691705,-46.692701,-46.693089,-46.693879,-46.693796,-46.694373,-46.6944,-46.694966,-46.695568,-46.696113,-46.696529,-46.696995,-46.697538,-46.697705,-46.697944,-46.698211,-46.698494,-46.698806,-46.699664,-46.699821,-46.700027,-46.700627,-46.700923,-46.701054,-46.701145,-46.702132,-46.703204,-46.704376,-46.705175,-46.705822,-46.706104,-46.70667,-46.707597,-46.708039,-46.709089,-46.708739,-46.708449,-46.708227,-46.708104,-46.707768,-46.707683,-46.707555,-46.706951,-46.706638,-46.706488,-46.706399,-46.706307,-46.705724,-46.705697,-46.705647,-46.705138,-46.705,-46.704823,-46.70489,-46.705621,-46.705821,-46.70622,-46.706327,-46.70651,-46.706555,-46.706995,-46.707146,-46.707583,-46.707779,-46.708097,-46.708451,-46.708793,-46.70939,-46.7096,-46.710058,-46.710857,-46.711223,-46.711521,-46.711705,-46.71182,-46.711918,-46.711985,-46.712105,-46.712246,-46.712318,-46.712344,-46.712291,-46.712248,-46.712209,-46.712869,-46.713159,-46.713332,-46.71397,-46.714673,-46.715071,-46.715309,-46.715491,-46.716184,-46.717033,-46.717037,-46.717025,-46.717001,-46.716965,-46.716382,-46.715109,-46.714328,-46.713834,-46.713442,-46.712785,-46.712252,-46.712131,-46.710939,-46.71056,-46.71086,-46.711001,-46.711077,-46.711312,-46.711409,-46.711851,-46.711991,-46.712087,-46.712123,-46.712333,-46.712677,-46.712764,-46.712785],"lat":[-23.550179,-23.550187,-23.550184,-23.550175,-23.550171,-23.550163,-23.55015,-23.550143,-23.550123,-23.550047,-23.54997,-23.549722,-23.549577,-23.549456,-23.549351,-23.549257,-23.549249,-23.549179,-23.54917,-23.549161,-23.549053,-23.548945,-23.549093,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.58161,-23.582186,-23.583162,-23.583271,-23.583646,-23.584058,-23.584205,-23.584748,-23.585167,-23.585541,-23.586157,-23.587051,-23.587905,-23.589026,-23.590097,-23.590656,-23.590971,-23.591649,-23.592235,-23.592899,-23.593863,-23.594327,-23.594843,-23.59524,-23.595634,-23.596241,-23.596696,-23.597193,-23.597481,-23.597757,-23.597916,-23.598123,-23.598536,-23.598745,-23.600012,-23.600453,-23.60109,-23.602114,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.608049,-23.608308,-23.608521,-23.609937,-23.610209,-23.610352,-23.610507,-23.610866,-23.611162,-23.611894,-23.612943,-23.613878,-23.612999,-23.612252,-23.611728,-23.610519,-23.610192,-23.610042,-23.609876,-23.609562,-23.609227,-23.607997,-23.606736,-23.606282,-23.60593,-23.60549,-23.60435,-23.603994,-23.603706,-23.603556,-23.603288,-23.603256,-23.603846,-23.604711,-23.605496,-23.605673,-23.606417,-23.606922,-23.607464,-23.608225,-23.609043,-23.609579,-23.610194,-23.611156,-23.611691,-23.612222,-23.612756,-23.61307,-23.6133,-23.613797,-23.614079,-23.615189,-23.615311,-23.61616,-23.616421,-23.617415,-23.618707,-23.61908,-23.619396,-23.62019,-23.620702,-23.620908,-23.621035,-23.621166,-23.621358,-23.622027,-23.623149,-23.623321,-23.623359,-23.623441,-23.623481,-23.623762,-23.623844,-23.624283,-23.624412,-23.624493,-23.624591,-23.625492,-23.625653,-23.6258,-23.625868,-23.625888,-23.625885,-23.625843,-23.625799,-23.625824,-23.625887,-23.626015,-23.626078,-23.62614,-23.626158,-23.626396,-23.627873,-23.628649,-23.6294,-23.629631,-23.630056,-23.630739,-23.631662,-23.631965,-23.632868,-23.633297,-23.63416,-23.634213,-23.634861,-23.634892,-23.635519,-23.636204,-23.636833,-23.637588,-23.638333,-23.639189,-23.639444,-23.639832,-23.640264,-23.640705,-23.641224,-23.642638,-23.642804,-23.642991,-23.643393,-23.643601,-23.643722,-23.643827,-23.645275,-23.64684,-23.648491,-23.64964,-23.649924,-23.650047,-23.650286,-23.65065,-23.650759,-23.651062,-23.652249,-23.653266,-23.654015,-23.65433,-23.655291,-23.655707,-23.656204,-23.657567,-23.658297,-23.658466,-23.658541,-23.658593,-23.658718,-23.658756,-23.658834,-23.659558,-23.659894,-23.660351,-23.660386,-23.660971,-23.661147,-23.661588,-23.661759,-23.662032,-23.662075,-23.662502,-23.662655,-23.663101,-23.663329,-23.663624,-23.663906,-23.664185,-23.664523,-23.664611,-23.664842,-23.665235,-23.665409,-23.665556,-23.66546,-23.665429,-23.665418,-23.665419,-23.665437,-23.665498,-23.665606,-23.665775,-23.665952,-23.66602,-23.666122,-23.667184,-23.667607,-23.667882,-23.668851,-23.670018,-23.670633,-23.670993,-23.67126,-23.6723,-23.673678,-23.673722,-23.673771,-23.673813,-23.673841,-23.674139,-23.674538,-23.673338,-23.672568,-23.671966,-23.670922,-23.671233,-23.671296,-23.671934,-23.671295,-23.670757,-23.670522,-23.670413,-23.670087,-23.669971,-23.669353,-23.669175,-23.66908,-23.669843,-23.67015,-23.670737,-23.670886,-23.670922]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#00CC33","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/5-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.585335,-46.670843,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/5-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.63954,-46.639412,-46.639352,-46.639322,-46.639273,-46.639248,-46.639224,-46.63916,-46.639104,-46.639039,-46.63902,-46.639035,-46.639068,-46.639091,-46.639093,-46.63911,-46.639112,-46.639114,-46.639129,-46.639297,-46.640445,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670546,-46.670478,-46.670331,-46.670316,-46.670276,-46.670223,-46.670281,-46.670545,-46.670738,-46.67089,-46.671178,-46.67154,-46.671789,-46.672116,-46.672441,-46.672584,-46.672655,-46.672747,-46.672798,-46.672882,-46.67299,-46.673022,-46.673102,-46.673157,-46.673243,-46.673414,-46.673688,-46.673918,-46.674008,-46.674008,-46.673991,-46.673953,-46.673931,-46.673932,-46.673977,-46.674005,-46.674119,-46.674293,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676475,-46.67659,-46.676672,-46.677141,-46.677216,-46.677269,-46.677325,-46.677455,-46.677559,-46.677836,-46.678185,-46.678711,-46.679276,-46.679592,-46.679916,-46.680516,-46.681027,-46.681193,-46.681326,-46.681464,-46.681659,-46.681802,-46.682,-46.682407,-46.682664,-46.682807,-46.682981,-46.68305,-46.683107,-46.683224,-46.683463,-46.683598,-46.683682,-46.683731,-46.683782,-46.683818,-46.683844,-46.683879,-46.683884,-46.68409,-46.684176,-46.684383,-46.684473,-46.685008,-46.686035,-46.687308,-46.687432,-46.688484,-46.689053,-46.689591,-46.689762,-46.690068,-46.690553,-46.69137,-46.691705,-46.692701,-46.693089,-46.693879,-46.694473,-46.695039,-46.695217,-46.695795,-46.696607,-46.697415,-46.698241,-46.699028,-46.699801,-46.700596,-46.70139,-46.702182,-46.702979,-46.703765,-46.704562,-46.705336,-46.706193,-46.706977,-46.707786,-46.708244,-46.708724,-46.710032,-46.710793,-46.711097,-46.711578,-46.71169,-46.711792,-46.711863,-46.711913,-46.711979,-46.712012,-46.712014,-46.712012,-46.711987,-46.711901,-46.711827,-46.711736,-46.711748,-46.711738,-46.711741,-46.711743,-46.711729,-46.711732,-46.711729,-46.711734,-46.711728,-46.711731,-46.711737,-46.71174,-46.711744,-46.711735,-46.711736,-46.711722,-46.711725,-46.711713,-46.711709,-46.711704,-46.712353,-46.712547,-46.713151,-46.713493,-46.714607,-46.715975,-46.717115,-46.716975,-46.716976,-46.716971,-46.717014,-46.717136,-46.71725,-46.718017,-46.718827,-46.718217,-46.718119,-46.717364,-46.717247],"lat":[-23.550184,-23.550175,-23.550171,-23.550163,-23.55015,-23.550143,-23.550123,-23.550047,-23.54997,-23.549722,-23.549577,-23.549456,-23.549351,-23.549257,-23.549249,-23.549179,-23.54917,-23.549161,-23.549053,-23.548945,-23.549093,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.58161,-23.582186,-23.583162,-23.583271,-23.583646,-23.584058,-23.584205,-23.584748,-23.585167,-23.585541,-23.586157,-23.587051,-23.587905,-23.589026,-23.590097,-23.590656,-23.590971,-23.591649,-23.592235,-23.592899,-23.593863,-23.594327,-23.594843,-23.59524,-23.595634,-23.596241,-23.596696,-23.597193,-23.597481,-23.597757,-23.597916,-23.598123,-23.598536,-23.598745,-23.600012,-23.600453,-23.60109,-23.602114,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.608049,-23.608308,-23.608521,-23.609937,-23.610209,-23.610352,-23.610507,-23.610866,-23.611162,-23.611894,-23.612943,-23.613878,-23.614676,-23.615179,-23.615618,-23.616481,-23.617239,-23.61735,-23.617416,-23.617479,-23.617612,-23.617725,-23.617924,-23.618372,-23.618611,-23.618799,-23.619089,-23.619216,-23.619335,-23.619581,-23.620019,-23.620207,-23.620329,-23.620416,-23.620557,-23.620739,-23.620948,-23.621206,-23.621339,-23.621677,-23.621821,-23.622129,-23.622232,-23.622936,-23.624441,-23.626212,-23.626396,-23.627873,-23.628649,-23.6294,-23.629631,-23.630056,-23.630739,-23.631662,-23.631965,-23.632868,-23.633297,-23.63416,-23.634805,-23.635473,-23.635366,-23.635028,-23.634583,-23.634096,-23.633625,-23.633156,-23.632706,-23.632251,-23.63178,-23.631314,-23.630842,-23.630373,-23.629906,-23.629459,-23.628957,-23.628493,-23.628038,-23.628705,-23.629401,-23.631266,-23.632354,-23.632777,-23.633469,-23.633473,-23.633484,-23.633511,-23.63354,-23.633599,-23.633667,-23.633737,-23.633803,-23.633887,-23.633932,-23.633977,-23.634059,-23.634643,-23.635083,-23.635381,-23.635547,-23.63659,-23.636656,-23.636955,-23.63703,-23.637335,-23.637573,-23.637942,-23.638357,-23.63848,-23.639025,-23.639075,-23.639654,-23.639857,-23.640401,-23.641112,-23.642217,-23.642017,-23.641982,-23.641889,-23.641854,-23.641713,-23.641584,-23.641465,-23.640344,-23.640247,-23.640113,-23.639933,-23.639658,-23.639454,-23.639824,-23.640214,-23.641317,-23.641378,-23.641443,-23.641453]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#00CCCC","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559846,-46.654687,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/6-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.585335,-46.670843,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/6-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.639198,-46.639243,-46.639365,-46.639409,-46.639605,-46.63965,-46.639859,-46.639895,-46.640235,-46.640201,-46.640169,-46.640025,-46.63995,-46.639904,-46.639834,-46.639794,-46.639687,-46.639596,-46.63954,-46.639412,-46.639352,-46.639322,-46.639273,-46.639248,-46.639224,-46.63916,-46.639104,-46.639039,-46.63902,-46.639035,-46.639068,-46.639091,-46.639093,-46.63911,-46.639112,-46.639114,-46.639129,-46.639297,-46.640445,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670546,-46.670478,-46.670331,-46.670316,-46.670276,-46.670223,-46.670281,-46.670545,-46.670738,-46.67089,-46.671178,-46.67154,-46.671789,-46.672116,-46.672441,-46.672584,-46.672655,-46.672747,-46.672798,-46.672882,-46.67299,-46.673022,-46.673102,-46.673157,-46.673243,-46.673414,-46.673688,-46.673918,-46.674008,-46.674008,-46.673991,-46.673953,-46.673931,-46.673932,-46.673977,-46.674005,-46.674119,-46.674293,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676475,-46.67659,-46.676672,-46.677141,-46.677216,-46.677269,-46.677325,-46.677455,-46.677559,-46.677836,-46.678185,-46.678711,-46.679276,-46.679592,-46.679916,-46.680516,-46.681027,-46.681193,-46.681326,-46.681464,-46.681659,-46.681802,-46.682,-46.682407,-46.682664,-46.682807,-46.682981,-46.68305,-46.683107,-46.683224,-46.683463,-46.683598,-46.683682,-46.683731,-46.683782,-46.683818,-46.683844,-46.683879,-46.683884,-46.68409,-46.684176,-46.684383,-46.684473,-46.685008,-46.686035,-46.687308,-46.687432,-46.688484,-46.689053,-46.689591,-46.689762,-46.690068,-46.690553,-46.69137,-46.691705,-46.692701,-46.693089,-46.693879,-46.694473,-46.695039,-46.695621,-46.696205,-46.696578,-46.696806,-46.697077,-46.697532,-46.697667,-46.697735,-46.698015,-46.698485,-46.699716,-46.700081,-46.700958,-46.701087,-46.701206,-46.701261,-46.701356,-46.701448,-46.702266,-46.702637,-46.702953,-46.703907,-46.704031,-46.704901,-46.705494,-46.705737,-46.705882,-46.706101,-46.706453,-46.707076,-46.707984,-46.708363,-46.708799,-46.711393,-46.71191,-46.712748,-46.713185,-46.71375,-46.71389,-46.714312,-46.715024,-46.716391,-46.717521,-46.718275,-46.719313,-46.722758,-46.723179,-46.723436,-46.724119,-46.725408,-46.725563,-46.726272,-46.726831,-46.727633,-46.728045,-46.728407,-46.728808,-46.729005,-46.730087,-46.730826,-46.731646,-46.731764,-46.732575,-46.733076,-46.733476,-46.733597,-46.733705,-46.733793,-46.733884,-46.733936,-46.735002,-46.73658,-46.73712,-46.738131,-46.738616,-46.739411,-46.739818,-46.739971,-46.74028,-46.740343,-46.740624,-46.740832,-46.741131,-46.741313,-46.741806,-46.741883,-46.741955,-46.74202,-46.742089,-46.742197,-46.742288,-46.742444,-46.74255,-46.742712,-46.742756,-46.742846,-46.742945,-46.743048,-46.743316,-46.743705,-46.744241,-46.744568,-46.744764,-46.744962,-46.74515,-46.7453,-46.745428,-46.745563,-46.745816,-46.746031,-46.746213,-46.746353,-46.746524,-46.746682,-46.746786,-46.746881,-46.746966,-46.747,-46.747057,-46.747126,-46.747214,-46.747302,-46.747488,-46.747634,-46.747802,-46.747961,-46.74812,-46.748492,-46.749626,-46.749709,-46.750297,-46.750575,-46.750808,-46.751074,-46.751191,-46.751279,-46.751365,-46.751545,-46.751632,-46.751789,-46.752191,-46.752485,-46.752737,-46.752897,-46.753094,-46.753391,-46.753426,-46.753768,-46.754103,-46.754283,-46.754609,-46.754888,-46.755062,-46.756285,-46.757155,-46.757674,-46.757738,-46.757805,-46.757928,-46.758678,-46.759317,-46.759586,-46.759746,-46.760052,-46.760249,-46.760477,-46.760696,-46.760887,-46.761157,-46.761216,-46.761285,-46.761347,-46.761548,-46.762232,-46.762379,-46.762517,-46.762661,-46.762792],"lat":[-23.549473,-23.549478,-23.54949,-23.549495,-23.549516,-23.549521,-23.549543,-23.549547,-23.549579,-23.549671,-23.549708,-23.549927,-23.550028,-23.550075,-23.550131,-23.550152,-23.550179,-23.550187,-23.550184,-23.550175,-23.550171,-23.550163,-23.55015,-23.550143,-23.550123,-23.550047,-23.54997,-23.549722,-23.549577,-23.549456,-23.549351,-23.549257,-23.549249,-23.549179,-23.54917,-23.549161,-23.549053,-23.548945,-23.549093,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.58161,-23.582186,-23.583162,-23.583271,-23.583646,-23.584058,-23.584205,-23.584748,-23.585167,-23.585541,-23.586157,-23.587051,-23.587905,-23.589026,-23.590097,-23.590656,-23.590971,-23.591649,-23.592235,-23.592899,-23.593863,-23.594327,-23.594843,-23.59524,-23.595634,-23.596241,-23.596696,-23.597193,-23.597481,-23.597757,-23.597916,-23.598123,-23.598536,-23.598745,-23.600012,-23.600453,-23.60109,-23.602114,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.608049,-23.608308,-23.608521,-23.609937,-23.610209,-23.610352,-23.610507,-23.610866,-23.611162,-23.611894,-23.612943,-23.613878,-23.614676,-23.615179,-23.615618,-23.616481,-23.617239,-23.61735,-23.617416,-23.617479,-23.617612,-23.617725,-23.617924,-23.618372,-23.618611,-23.618799,-23.619089,-23.619216,-23.619335,-23.619581,-23.620019,-23.620207,-23.620329,-23.620416,-23.620557,-23.620739,-23.620948,-23.621206,-23.621339,-23.621677,-23.621821,-23.622129,-23.622232,-23.622936,-23.624441,-23.626212,-23.626396,-23.627873,-23.628649,-23.6294,-23.629631,-23.630056,-23.630739,-23.631662,-23.631965,-23.632868,-23.633297,-23.63416,-23.634805,-23.635473,-23.636132,-23.636781,-23.637525,-23.637896,-23.63829,-23.638973,-23.639179,-23.639293,-23.639791,-23.640554,-23.642575,-23.642905,-23.643558,-23.64364,-23.643689,-23.643717,-23.643759,-23.643784,-23.644257,-23.644471,-23.644665,-23.645243,-23.645308,-23.645842,-23.64626,-23.646398,-23.646435,-23.646463,-23.646444,-23.646388,-23.646271,-23.646239,-23.646152,-23.645566,-23.64549,-23.645371,-23.645296,-23.645195,-23.645171,-23.645131,-23.645051,-23.644904,-23.644841,-23.644828,-23.644831,-23.644749,-23.644747,-23.64474,-23.644708,-23.644629,-23.644612,-23.644533,-23.64447,-23.644396,-23.644345,-23.644307,-23.644295,-23.644303,-23.644228,-23.64405,-23.643825,-23.643798,-23.643684,-23.643609,-23.643537,-23.64351,-23.643567,-23.643552,-23.643533,-23.643443,-23.643227,-23.642888,-23.642764,-23.642564,-23.642484,-23.642343,-23.642305,-23.642306,-23.6423,-23.642302,-23.642334,-23.642373,-23.642448,-23.642505,-23.642724,-23.642768,-23.642817,-23.642862,-23.642928,-23.643043,-23.643174,-23.64351,-23.643686,-23.643896,-23.643937,-23.64399,-23.644041,-23.644076,-23.644101,-23.644099,-23.644119,-23.644204,-23.644266,-23.644337,-23.644416,-23.644501,-23.644592,-23.644716,-23.64494,-23.645129,-23.645283,-23.645426,-23.645609,-23.645819,-23.64599,-23.646188,-23.646417,-23.646507,-23.646662,-23.646846,-23.647062,-23.647237,-23.647509,-23.64763,-23.647775,-23.647855,-23.647927,-23.648065,-23.648497,-23.648535,-23.648892,-23.649102,-23.649244,-23.649379,-23.649416,-23.649437,-23.649446,-23.649443,-23.649429,-23.649384,-23.649181,-23.649056,-23.648958,-23.648919,-23.648886,-23.648859,-23.648856,-23.648857,-23.648879,-23.64891,-23.649003,-23.649115,-23.649211,-23.650148,-23.650864,-23.651438,-23.651532,-23.651613,-23.651725,-23.65259,-23.653285,-23.653575,-23.653782,-23.654136,-23.654365,-23.654631,-23.654863,-23.654773,-23.654548,-23.654528,-23.654513,-23.654565,-23.654782,-23.654284,-23.654177,-23.654077,-23.653972,-23.653877]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#0033CC","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559846,-46.654687,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/7-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.585335,-46.670843,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/7-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.639797,-46.639852,-46.640169,-46.640025,-46.63995,-46.639904,-46.639834,-46.639794,-46.639687,-46.639596,-46.63954,-46.639412,-46.639352,-46.639322,-46.639273,-46.639248,-46.639224,-46.63916,-46.639104,-46.639039,-46.63902,-46.639035,-46.639068,-46.639091,-46.639093,-46.63911,-46.639112,-46.639114,-46.639129,-46.639297,-46.640445,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.648513,-46.64878,-46.648983,-46.649618,-46.649822,-46.650014,-46.650137,-46.650224,-46.650275,-46.650436,-46.651426,-46.651486,-46.651516,-46.651549,-46.651701,-46.651737,-46.651769,-46.651825,-46.651895,-46.651968,-46.652037,-46.652375,-46.652637,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670546,-46.670478,-46.670331,-46.670316,-46.670276,-46.670223,-46.670281,-46.670545,-46.670738,-46.67089,-46.671178,-46.67154,-46.671789,-46.672116,-46.672441,-46.672584,-46.672655,-46.672747,-46.672798,-46.672882,-46.67299,-46.673022,-46.673102,-46.673157,-46.673243,-46.673414,-46.673688,-46.673918,-46.674008,-46.674008,-46.673991,-46.673953,-46.673931,-46.673932,-46.673977,-46.674005,-46.674119,-46.674293,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676475,-46.67659,-46.676672,-46.677141,-46.677216,-46.677269,-46.677325,-46.677455,-46.677559,-46.677836,-46.678185,-46.678711,-46.679276,-46.679592,-46.679916,-46.680516,-46.681027,-46.681193,-46.681326,-46.681464,-46.681659,-46.681802,-46.682,-46.682407,-46.682664,-46.682807,-46.682981,-46.68305,-46.683107,-46.683224,-46.683463,-46.683598,-46.683682,-46.683731,-46.683782,-46.683818,-46.683844,-46.683879,-46.683884,-46.68409,-46.684176,-46.684383,-46.684473,-46.685008,-46.686035,-46.687308,-46.687432,-46.688484,-46.689053,-46.689591,-46.689762,-46.690068,-46.690553,-46.69137,-46.691705,-46.691814,-46.692595,-46.692679,-46.693005,-46.693485,-46.693796,-46.694373,-46.6944,-46.694966,-46.695568,-46.696113,-46.696529,-46.696995,-46.697538,-46.697705,-46.697944,-46.698211,-46.698494,-46.698806,-46.699664,-46.699821,-46.700027,-46.700627,-46.700923,-46.701054,-46.701145,-46.702132,-46.703204,-46.704376,-46.705175,-46.705822,-46.706104,-46.70667,-46.707597,-46.708039,-46.709089,-46.708739,-46.708449,-46.708227,-46.708311,-46.708697,-46.708896,-46.708992,-46.709193,-46.709316,-46.709419,-46.709482,-46.709597,-46.709657,-46.71019,-46.710426,-46.71061,-46.710806,-46.710982,-46.71115,-46.711366,-46.711683,-46.712137,-46.712412,-46.712752,-46.712922,-46.713173,-46.713209,-46.713223,-46.713234,-46.713235,-46.713227,-46.713217,-46.713199,-46.713145,-46.712992,-46.712844,-46.712709,-46.712637,-46.712168,-46.712069],"lat":[-23.549645,-23.54965,-23.549708,-23.549927,-23.550028,-23.550075,-23.550131,-23.550152,-23.550179,-23.550187,-23.550184,-23.550175,-23.550171,-23.550163,-23.55015,-23.550143,-23.550123,-23.550047,-23.54997,-23.549722,-23.549577,-23.549456,-23.549351,-23.549257,-23.549249,-23.549179,-23.54917,-23.549161,-23.549053,-23.548945,-23.549093,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.554039,-23.554448,-23.554735,-23.555398,-23.555421,-23.555489,-23.555595,-23.555711,-23.555844,-23.555991,-23.55661,-23.556645,-23.556663,-23.556684,-23.556782,-23.556805,-23.556825,-23.556862,-23.556907,-23.556957,-23.557001,-23.557218,-23.557409,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.58161,-23.582186,-23.583162,-23.583271,-23.583646,-23.584058,-23.584205,-23.584748,-23.585167,-23.585541,-23.586157,-23.587051,-23.587905,-23.589026,-23.590097,-23.590656,-23.590971,-23.591649,-23.592235,-23.592899,-23.593863,-23.594327,-23.594843,-23.59524,-23.595634,-23.596241,-23.596696,-23.597193,-23.597481,-23.597757,-23.597916,-23.598123,-23.598536,-23.598745,-23.600012,-23.600453,-23.60109,-23.602114,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.608049,-23.608308,-23.608521,-23.609937,-23.610209,-23.610352,-23.610507,-23.610866,-23.611162,-23.611894,-23.612943,-23.613878,-23.614676,-23.615179,-23.615618,-23.616481,-23.617239,-23.61735,-23.617416,-23.617479,-23.617612,-23.617725,-23.617924,-23.618372,-23.618611,-23.618799,-23.619089,-23.619216,-23.619335,-23.619581,-23.620019,-23.620207,-23.620329,-23.620416,-23.620557,-23.620739,-23.620948,-23.621206,-23.621339,-23.621677,-23.621821,-23.622129,-23.622232,-23.622936,-23.624441,-23.626212,-23.626396,-23.627873,-23.628649,-23.6294,-23.629631,-23.630056,-23.630739,-23.631662,-23.631965,-23.632199,-23.632936,-23.633022,-23.633362,-23.633866,-23.634213,-23.634861,-23.634892,-23.635519,-23.636204,-23.636833,-23.637588,-23.638333,-23.639189,-23.639444,-23.639832,-23.640264,-23.640705,-23.641224,-23.642638,-23.642804,-23.642991,-23.643393,-23.643601,-23.643722,-23.643827,-23.645275,-23.64684,-23.648491,-23.64964,-23.649924,-23.650047,-23.650286,-23.65065,-23.650759,-23.651062,-23.652249,-23.653266,-23.654015,-23.65399,-23.65403,-23.654028,-23.654014,-23.653982,-23.653962,-23.653955,-23.653953,-23.653942,-23.653937,-23.653906,-23.6539,-23.65389,-23.653846,-23.653829,-23.653832,-23.65387,-23.653914,-23.653971,-23.654008,-23.654105,-23.654153,-23.654186,-23.654216,-23.654237,-23.654264,-23.654295,-23.654319,-23.654335,-23.654354,-23.654385,-23.654529,-23.654505,-23.65448,-23.654466,-23.654402,-23.654388]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#6600CC","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559846,-46.654687,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/8-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.585335,-46.670843,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/8-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.639635,-46.639697,-46.639876,-46.639938,-46.640274,-46.640235,-46.640201,-46.640169,-46.640025,-46.63995,-46.639904,-46.639834,-46.639794,-46.639687,-46.639596,-46.63954,-46.639412,-46.639352,-46.639322,-46.639273,-46.639248,-46.639224,-46.63916,-46.639104,-46.639039,-46.63902,-46.639035,-46.639068,-46.639091,-46.639093,-46.63911,-46.639112,-46.639114,-46.639129,-46.639297,-46.640445,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670546,-46.670478,-46.670331,-46.670316,-46.670276,-46.670223,-46.670281,-46.670545,-46.670738,-46.67089,-46.671178,-46.67154,-46.671789,-46.672116,-46.672441,-46.672584,-46.672655,-46.672747,-46.672798,-46.672882,-46.67299,-46.673022,-46.673102,-46.673157,-46.673243,-46.673414,-46.673688,-46.673918,-46.674008,-46.674008,-46.673991,-46.673953,-46.673931,-46.673932,-46.673977,-46.674005,-46.674119,-46.674293,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676475,-46.67659,-46.676672,-46.677141,-46.677216,-46.677269,-46.677325,-46.677455,-46.677559,-46.677836,-46.678185,-46.678711,-46.679276,-46.679592,-46.679916,-46.680516,-46.681027,-46.681193,-46.681326,-46.681464,-46.681659,-46.681802,-46.682,-46.682407,-46.682664,-46.682807,-46.682981,-46.68305,-46.683107,-46.683224,-46.683463,-46.683598,-46.683682,-46.683731,-46.683782,-46.683818,-46.683844,-46.683879,-46.683884,-46.68409,-46.684176,-46.684383,-46.684473,-46.685008,-46.686035,-46.687308,-46.687432,-46.688484,-46.689053,-46.689591,-46.689762,-46.690068,-46.690553,-46.69137,-46.691705,-46.691814,-46.692595,-46.692679,-46.693005,-46.693485,-46.693796,-46.694373,-46.6944,-46.694966,-46.695568,-46.696113,-46.696529,-46.696995,-46.697538,-46.697705,-46.697944,-46.698211,-46.698494,-46.698806,-46.699664,-46.699821,-46.700027,-46.700627,-46.700923,-46.701054,-46.701145,-46.702132,-46.703204,-46.704376,-46.705175,-46.705822,-46.706104,-46.70667,-46.707597,-46.708039,-46.709089,-46.708739,-46.708449,-46.708227,-46.708104,-46.707768,-46.707683,-46.707555,-46.706951,-46.706638,-46.706488,-46.706399,-46.706307,-46.705724,-46.705697,-46.705647,-46.705138,-46.705,-46.704823,-46.70489,-46.705621,-46.705821,-46.70622,-46.706327,-46.70651,-46.706555,-46.706536,-46.707272,-46.707583,-46.707779,-46.708097,-46.708451,-46.708793,-46.70939,-46.7096,-46.710058,-46.710857,-46.711223,-46.711521,-46.712024,-46.712344,-46.712485,-46.712985,-46.714364,-46.715267,-46.71578,-46.717029,-46.718383,-46.720618,-46.721501,-46.72254,-46.723615,-46.723917,-46.724331,-46.724713,-46.726745,-46.726807,-46.726918,-46.726968,-46.727132,-46.727503,-46.728755,-46.729158,-46.729369,-46.729599,-46.730202,-46.730478,-46.730782,-46.731363,-46.731601,-46.731789,-46.731958,-46.732109,-46.732591,-46.732981,-46.73347,-46.733591,-46.735262,-46.73552,-46.735511,-46.735509,-46.735508,-46.735506,-46.735507,-46.735504,-46.735501,-46.735501,-46.7355,-46.735501,-46.735499,-46.735498,-46.735497,-46.735492,-46.735487,-46.735478,-46.735462,-46.735439,-46.735409,-46.735379,-46.73535,-46.735314,-46.73528,-46.735249,-46.735222,-46.735205,-46.735195,-46.735192,-46.735194,-46.735197,-46.735198,-46.735203,-46.735208,-46.735209,-46.73521,-46.735213,-46.735216,-46.735229,-46.735233],"lat":[-23.549401,-23.549407,-23.549423,-23.549429,-23.549478,-23.549579,-23.549671,-23.549708,-23.549927,-23.550028,-23.550075,-23.550131,-23.550152,-23.550179,-23.550187,-23.550184,-23.550175,-23.550171,-23.550163,-23.55015,-23.550143,-23.550123,-23.550047,-23.54997,-23.549722,-23.549577,-23.549456,-23.549351,-23.549257,-23.549249,-23.549179,-23.54917,-23.549161,-23.549053,-23.548945,-23.549093,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.58161,-23.582186,-23.583162,-23.583271,-23.583646,-23.584058,-23.584205,-23.584748,-23.585167,-23.585541,-23.586157,-23.587051,-23.587905,-23.589026,-23.590097,-23.590656,-23.590971,-23.591649,-23.592235,-23.592899,-23.593863,-23.594327,-23.594843,-23.59524,-23.595634,-23.596241,-23.596696,-23.597193,-23.597481,-23.597757,-23.597916,-23.598123,-23.598536,-23.598745,-23.600012,-23.600453,-23.60109,-23.602114,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.608049,-23.608308,-23.608521,-23.609937,-23.610209,-23.610352,-23.610507,-23.610866,-23.611162,-23.611894,-23.612943,-23.613878,-23.614676,-23.615179,-23.615618,-23.616481,-23.617239,-23.61735,-23.617416,-23.617479,-23.617612,-23.617725,-23.617924,-23.618372,-23.618611,-23.618799,-23.619089,-23.619216,-23.619335,-23.619581,-23.620019,-23.620207,-23.620329,-23.620416,-23.620557,-23.620739,-23.620948,-23.621206,-23.621339,-23.621677,-23.621821,-23.622129,-23.622232,-23.622936,-23.624441,-23.626212,-23.626396,-23.627873,-23.628649,-23.6294,-23.629631,-23.630056,-23.630739,-23.631662,-23.631965,-23.632199,-23.632936,-23.633022,-23.633362,-23.633866,-23.634213,-23.634861,-23.634892,-23.635519,-23.636204,-23.636833,-23.637588,-23.638333,-23.639189,-23.639444,-23.639832,-23.640264,-23.640705,-23.641224,-23.642638,-23.642804,-23.642991,-23.643393,-23.643601,-23.643722,-23.643827,-23.645275,-23.64684,-23.648491,-23.64964,-23.649924,-23.650047,-23.650286,-23.65065,-23.650759,-23.651062,-23.652249,-23.653266,-23.654015,-23.65433,-23.655291,-23.655707,-23.656204,-23.657567,-23.658297,-23.658466,-23.658541,-23.658593,-23.658718,-23.658756,-23.658834,-23.659558,-23.659894,-23.660351,-23.660386,-23.660971,-23.661147,-23.661588,-23.661759,-23.662032,-23.662075,-23.662246,-23.663029,-23.663101,-23.663329,-23.663624,-23.663906,-23.664185,-23.664523,-23.664611,-23.664842,-23.665235,-23.665409,-23.665556,-23.665651,-23.665775,-23.665742,-23.665803,-23.665921,-23.666005,-23.666049,-23.666159,-23.666288,-23.666505,-23.666617,-23.66672,-23.666873,-23.666901,-23.666942,-23.666985,-23.667171,-23.667158,-23.667149,-23.667146,-23.66715,-23.667186,-23.667328,-23.667372,-23.667403,-23.667435,-23.667505,-23.66755,-23.667597,-23.66768,-23.6677,-23.667713,-23.667762,-23.667824,-23.668075,-23.668312,-23.668581,-23.668639,-23.669225,-23.669313,-23.66885,-23.668653,-23.668536,-23.668416,-23.668299,-23.668185,-23.668075,-23.667973,-23.667861,-23.667753,-23.667646,-23.667538,-23.667434,-23.6674,-23.667386,-23.667375,-23.667359,-23.667344,-23.667332,-23.667328,-23.667327,-23.667334,-23.667345,-23.667361,-23.667382,-23.6674,-23.667417,-23.667442,-23.667555,-23.667695,-23.66782,-23.667961,-23.668097,-23.668261,-23.668385,-23.668504,-23.668634,-23.66878,-23.668828]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC0099","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]}],"limits":{"lat":[-23.674538,-23.502893],"lng":[-46.762792,-46.625926]},"fitBounds":[-23.5585974,-46.6539853,-23.5870167,-46.6746184]},"evals":["calls.5.args.3.icon","calls.6.args.3.icon","calls.8.args.3.icon","calls.9.args.3.icon","calls.11.args.3.icon","calls.12.args.3.icon","calls.14.args.3.icon","calls.15.args.3.icon","calls.17.args.3.icon","calls.18.args.3.icon","calls.20.args.3.icon","calls.21.args.3.icon","calls.23.args.3.icon","calls.24.args.3.icon","calls.26.args.3.icon","calls.27.args.3.icon"]}</script><!--/html_preserve-->


## Obtendo informações online

Na versão atual do pacote, temos a função `colect_bus`, que torna possível 
obter as localizações de ônibus a partir de:

- Um conjunto de linhas. Nesse caso, a função retorna a localização em tempo
real de todos os ônibus nas linhas informadas.


```r
trip_ids <- search_path(end1 = 'Avenida 9 de Julho, 2000, São Paulo', 
                        end2 = 'Av. Pres. Juscelino Kubitschek, 500, São Paulo')

trip_ids %>% collect_bus(trip_id, 'trip')
```

```
## Autenticação realizada com sucesso!
```

```
## Source: local data frame [11 x 14]
## 
##    CodigoLinha     p     a        py        px route_id Circular Letreiro
## 1          516 23027  TRUE -23.58664 -46.67721  106A-10    FALSE     106A
## 2          516 23032  TRUE -23.59033 -46.68845  106A-10    FALSE     106A
## 3          516 11953  TRUE -23.54285 -46.63530  106A-10    FALSE     106A
## 4          516 23026  TRUE -23.58982 -46.68827  106A-10    FALSE     106A
## 5          516 23039  TRUE -23.53641 -46.63410  106A-10    FALSE     106A
## 6          516 23056  TRUE -23.50297 -46.62605  106A-10    FALSE     106A
## 7          516 23082  TRUE -23.58950 -46.68815  106A-10    FALSE     106A
## 8          516 23034  TRUE -23.57679 -46.67111  106A-10    FALSE     106A
## 9        33127 76021  TRUE -23.60245 -46.67604  6401-10    FALSE     6401
## 10       33127 76011  TRUE -23.58191 -46.67060  6401-10    FALSE     6401
## 11       33127 76845 FALSE -23.54244 -46.63642  6401-10    FALSE     6401
## Variables not shown: Sentido (int), Tipo (int), DenominacaoTPTS (chr),
##   DenominacaoTSTP (chr), Informacoes (lgl), trip_id (chr)
```

- Um conjunto de rotas. Nesse caso, a função retorna a localização em tempo
real de todos os ônibus nas rotas informadas (lembrando, uma rota pode 
corresponder a uma ou duas linhas).


```r
trip_ids %>% collect_bus(route_id, 'routes')
```

```
## NULL
```

Para desenhar os ônibus no mapa, basta chamar a função `draw_bus()`.


```r
trip_ids %>% 
  collect_bus(trip_id, 'trip') %>%
  draw_bus()
```

<!--html_preserve--><div id="htmlwidget-7810" style="width:504px;height:504px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-7810">{"x":{"calls":[{"method":"tileLayer","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>"}]},{"method":"marker","args":[[-23.58664225,-23.590332375,-23.542847,-23.589824875,-23.53641,-23.5029715,-23.5894965,-23.57679175],[-46.6772115,-46.68844975,-46.635301625,-46.68827475,-46.6340954375,-46.626045,-46.688153,-46.67111275],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-bus.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[[-23.602453125,-23.58191425,-23.542435125],[-46.676043,-46.670598125,-46.63642025],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-bus.png', iconSize: [32, 37] })"},null]}],"limits":{"lat":[-23.602453125,-23.5029715],"lng":[-46.68844975,-46.626045]}},"evals":["calls.1.args.3.icon","calls.2.args.3.icon"]}</script><!--/html_preserve-->

É possível desenhar tanto os ônibus em tempo real quanto os caminhos da
função `draw_paths`


```r
m <- trip_ids %>% draw_paths()
trip_ids %>%
  collect_bus(trip_id, 'trip') %>%
  draw_bus(m)
```

<!--html_preserve--><div id="htmlwidget-1081" style="width:504px;height:504px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-1081">{"x":{"calls":[{"method":"tileLayer","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>"}]},{"method":"circle","args":[-23.5585974,-46.6539853,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"circle","args":[-23.5870167,-46.6746184,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"marker","args":[-23.5585974,-46.6539853,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.5870167,-46.6746184,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.584721,-46.675209,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.625926,-46.626164,-46.626307,-46.626412,-46.626382,-46.626371,-46.62631,-46.62625,-46.62625,-46.626234,-46.626201,-46.626206,-46.6262,-46.626195,-46.626208,-46.626205,-46.626205,-46.626198,-46.62619,-46.626158,-46.62843,-46.628837,-46.628933,-46.629031,-46.629177,-46.629385,-46.629451,-46.629552,-46.629694,-46.629799,-46.629901,-46.630033,-46.630225,-46.6304,-46.630495,-46.630538,-46.630537,-46.630513,-46.630462,-46.630411,-46.630253,-46.63006,-46.629902,-46.629807,-46.629771,-46.629759,-46.62977,-46.629817,-46.629997,-46.630034,-46.630076,-46.630101,-46.630162,-46.630211,-46.630272,-46.630327,-46.630339,-46.630356,-46.630361,-46.630554,-46.630782,-46.630826,-46.631034,-46.631136,-46.63125,-46.631317,-46.631406,-46.631449,-46.631538,-46.63176,-46.631991,-46.63222,-46.6323,-46.632352,-46.632425,-46.63291,-46.632947,-46.633313,-46.633658,-46.633684,-46.633897,-46.634532,-46.63473,-46.634911,-46.634939,-46.635247,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671563,-46.671854,-46.671986,-46.67218,-46.672401,-46.672614,-46.672708,-46.672772,-46.672943,-46.673084,-46.673252,-46.674144,-46.674738,-46.675517,-46.67533,-46.674884,-46.674601,-46.674226,-46.674008,-46.673822,-46.673728,-46.673486,-46.675513,-46.676594,-46.677592,-46.677281,-46.677003,-46.678093,-46.678993,-46.679936,-46.68101,-46.681826,-46.682102,-46.681969,-46.681532,-46.68147,-46.68099,-46.680847,-46.680626,-46.680606,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.689688,-46.689593,-46.689315,-46.689078,-46.689015,-46.689012,-46.689008,-46.688933,-46.688651,-46.688581,-46.688231,-46.688075,-46.688065,-46.688031],"lat":[-23.502997,-23.502946,-23.502916,-23.502893,-23.503981,-23.504157,-23.505211,-23.506057,-23.50639,-23.506881,-23.507462,-23.507598,-23.508101,-23.508236,-23.5093,-23.50997,-23.510581,-23.510698,-23.511098,-23.511472,-23.511492,-23.511501,-23.51152,-23.511553,-23.511632,-23.513072,-23.513299,-23.513462,-23.513484,-23.513505,-23.513555,-23.513635,-23.513797,-23.51404,-23.514206,-23.51432,-23.514459,-23.514632,-23.514841,-23.514944,-23.515122,-23.515277,-23.515371,-23.515485,-23.515547,-23.515632,-23.515753,-23.516194,-23.517412,-23.517771,-23.51818,-23.518394,-23.518764,-23.519134,-23.519583,-23.519925,-23.520256,-23.52033,-23.5207,-23.52172,-23.522865,-23.523086,-23.524086,-23.524525,-23.525374,-23.52597,-23.526528,-23.526693,-23.527482,-23.52873,-23.529555,-23.530335,-23.530545,-23.530714,-23.530993,-23.532244,-23.532378,-23.53386,-23.534985,-23.535074,-23.535755,-23.537851,-23.5385,-23.539095,-23.53923,-23.540239,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576947,-23.577008,-23.577028,-23.57704,-23.577024,-23.576992,-23.576975,-23.576969,-23.576961,-23.576975,-23.577007,-23.577536,-23.577861,-23.578315,-23.57855,-23.579895,-23.580785,-23.581963,-23.582651,-23.583241,-23.583532,-23.584282,-23.584838,-23.585129,-23.585394,-23.586426,-23.587291,-23.587584,-23.587833,-23.588085,-23.588374,-23.5886,-23.588662,-23.589087,-23.590455,-23.590624,-23.592451,-23.592935,-23.593696,-23.593802,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.594032,-23.593905,-23.593501,-23.593232,-23.592685,-23.592406,-23.592069,-23.591804,-23.590912,-23.590713,-23.589698,-23.589295,-23.589272,-23.589194]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC0000","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.588574,-46.676052,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.634657,-46.634723,-46.634962,-46.635034,-46.635314,-46.635416,-46.635529,-46.635935,-46.636064,-46.63615,-46.63619,-46.636245,-46.636285,-46.636312,-46.636423,-46.636624,-46.63666,-46.636578,-46.636544,-46.636346,-46.636205,-46.635825,-46.635667,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670619,-46.670452,-46.670449,-46.670124,-46.670094,-46.67005,-46.670073,-46.670138,-46.670203,-46.670282,-46.670366,-46.670718,-46.671342,-46.671786,-46.672347,-46.67296,-46.673076,-46.673718,-46.67466,-46.675032,-46.67598,-46.676101,-46.67642,-46.677528,-46.678443,-46.679188,-46.680436,-46.680382,-46.680227,-46.680094,-46.679956,-46.679806,-46.679652,-46.679382,-46.679212,-46.679124,-46.680167,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.690692,-46.689511,-46.688174,-46.687797,-46.686888,-46.6864,-46.685427,-46.684448,-46.683465,-46.682768,-46.681489,-46.681058,-46.679239,-46.677606,-46.67708,-46.676239,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676534,-46.676626,-46.676687,-46.676754,-46.676826,-46.676886,-46.676934,-46.677012,-46.677523,-46.67763,-46.678115,-46.678748,-46.679547,-46.679817,-46.679758,-46.680199,-46.680315,-46.6804,-46.680418,-46.680427,-46.680424,-46.680416,-46.680404,-46.680378,-46.680356,-46.680337,-46.680313,-46.680272,-46.68023,-46.680188,-46.680118,-46.680059],"lat":[-23.53557,-23.535554,-23.535496,-23.535478,-23.535409,-23.535382,-23.535906,-23.537868,-23.53857,-23.538848,-23.539,-23.539227,-23.53944,-23.539617,-23.540183,-23.541313,-23.541523,-23.541606,-23.541642,-23.542911,-23.542687,-23.541591,-23.541125,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.581723,-23.583253,-23.58329,-23.583391,-23.583723,-23.584027,-23.584217,-23.584142,-23.584114,-23.584104,-23.58413,-23.585017,-23.585187,-23.585359,-23.585597,-23.585943,-23.586012,-23.586407,-23.587493,-23.587846,-23.588654,-23.588787,-23.589061,-23.589373,-23.589614,-23.589822,-23.590165,-23.590333,-23.590812,-23.591239,-23.591658,-23.592119,-23.592619,-23.593452,-23.593983,-23.594256,-23.594543,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.595691,-23.596227,-23.596843,-23.597019,-23.597443,-23.59767,-23.598116,-23.598568,-23.599022,-23.599343,-23.599929,-23.600128,-23.600972,-23.601728,-23.601971,-23.602359,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.607905,-23.607974,-23.608003,-23.608023,-23.608036,-23.608032,-23.608017,-23.607977,-23.607654,-23.607544,-23.607128,-23.605656,-23.604089,-23.603695,-23.603056,-23.602611,-23.602785,-23.602905,-23.602943,-23.602976,-23.603022,-23.603049,-23.603071,-23.603103,-23.603125,-23.603138,-23.603151,-23.603164,-23.603166,-23.603163,-23.603151,-23.603138]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC9900","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[[-23.58664225,-23.590332375,-23.542847,-23.589824875,-23.53641,-23.5029715,-23.5894965,-23.57679175],[-46.6772115,-46.68844975,-46.635301625,-46.68827475,-46.6340954375,-46.626045,-46.688153,-46.67111275],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-bus.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[[-23.602453125,-23.58191425,-23.542435125],[-46.676043,-46.670598125,-46.63642025],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-bus.png', iconSize: [32, 37] })"},null]}],"limits":{"lat":[-23.608036,-23.502893],"lng":[-46.690692,-46.625926]},"fitBounds":[-23.5585974,-46.6539853,-23.5870167,-46.6746184]},"evals":["calls.5.args.3.icon","calls.6.args.3.icon","calls.8.args.3.icon","calls.9.args.3.icon","calls.11.args.3.icon","calls.12.args.3.icon"]}</script><!--/html_preserve-->


Observe que os ônibus realmente andam!


```r
Sys.sleep(10)
trip_ids %>% 
  collect_bus(trip_id, 'trip') %>%
  draw_bus(m)
```

<!--html_preserve--><div id="htmlwidget-6276" style="width:504px;height:504px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-6276">{"x":{"calls":[{"method":"tileLayer","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>"}]},{"method":"circle","args":[-23.5585974,-46.6539853,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"circle","args":[-23.5870167,-46.6746184,300,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]},{"method":"marker","args":[-23.5585974,-46.6539853,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.5870167,-46.6746184,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.584721,-46.675209,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.625926,-46.626164,-46.626307,-46.626412,-46.626382,-46.626371,-46.62631,-46.62625,-46.62625,-46.626234,-46.626201,-46.626206,-46.6262,-46.626195,-46.626208,-46.626205,-46.626205,-46.626198,-46.62619,-46.626158,-46.62843,-46.628837,-46.628933,-46.629031,-46.629177,-46.629385,-46.629451,-46.629552,-46.629694,-46.629799,-46.629901,-46.630033,-46.630225,-46.6304,-46.630495,-46.630538,-46.630537,-46.630513,-46.630462,-46.630411,-46.630253,-46.63006,-46.629902,-46.629807,-46.629771,-46.629759,-46.62977,-46.629817,-46.629997,-46.630034,-46.630076,-46.630101,-46.630162,-46.630211,-46.630272,-46.630327,-46.630339,-46.630356,-46.630361,-46.630554,-46.630782,-46.630826,-46.631034,-46.631136,-46.63125,-46.631317,-46.631406,-46.631449,-46.631538,-46.63176,-46.631991,-46.63222,-46.6323,-46.632352,-46.632425,-46.63291,-46.632947,-46.633313,-46.633658,-46.633684,-46.633897,-46.634532,-46.63473,-46.634911,-46.634939,-46.635247,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671563,-46.671854,-46.671986,-46.67218,-46.672401,-46.672614,-46.672708,-46.672772,-46.672943,-46.673084,-46.673252,-46.674144,-46.674738,-46.675517,-46.67533,-46.674884,-46.674601,-46.674226,-46.674008,-46.673822,-46.673728,-46.673486,-46.675513,-46.676594,-46.677592,-46.677281,-46.677003,-46.678093,-46.678993,-46.679936,-46.68101,-46.681826,-46.682102,-46.681969,-46.681532,-46.68147,-46.68099,-46.680847,-46.680626,-46.680606,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.689688,-46.689593,-46.689315,-46.689078,-46.689015,-46.689012,-46.689008,-46.688933,-46.688651,-46.688581,-46.688231,-46.688075,-46.688065,-46.688031],"lat":[-23.502997,-23.502946,-23.502916,-23.502893,-23.503981,-23.504157,-23.505211,-23.506057,-23.50639,-23.506881,-23.507462,-23.507598,-23.508101,-23.508236,-23.5093,-23.50997,-23.510581,-23.510698,-23.511098,-23.511472,-23.511492,-23.511501,-23.51152,-23.511553,-23.511632,-23.513072,-23.513299,-23.513462,-23.513484,-23.513505,-23.513555,-23.513635,-23.513797,-23.51404,-23.514206,-23.51432,-23.514459,-23.514632,-23.514841,-23.514944,-23.515122,-23.515277,-23.515371,-23.515485,-23.515547,-23.515632,-23.515753,-23.516194,-23.517412,-23.517771,-23.51818,-23.518394,-23.518764,-23.519134,-23.519583,-23.519925,-23.520256,-23.52033,-23.5207,-23.52172,-23.522865,-23.523086,-23.524086,-23.524525,-23.525374,-23.52597,-23.526528,-23.526693,-23.527482,-23.52873,-23.529555,-23.530335,-23.530545,-23.530714,-23.530993,-23.532244,-23.532378,-23.53386,-23.534985,-23.535074,-23.535755,-23.537851,-23.5385,-23.539095,-23.53923,-23.540239,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576947,-23.577008,-23.577028,-23.57704,-23.577024,-23.576992,-23.576975,-23.576969,-23.576961,-23.576975,-23.577007,-23.577536,-23.577861,-23.578315,-23.57855,-23.579895,-23.580785,-23.581963,-23.582651,-23.583241,-23.583532,-23.584282,-23.584838,-23.585129,-23.585394,-23.586426,-23.587291,-23.587584,-23.587833,-23.588085,-23.588374,-23.5886,-23.588662,-23.589087,-23.590455,-23.590624,-23.592451,-23.592935,-23.593696,-23.593802,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.594032,-23.593905,-23.593501,-23.593232,-23.592685,-23.592406,-23.592069,-23.591804,-23.590912,-23.590713,-23.589698,-23.589295,-23.589272,-23.589194]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC0000","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[-23.559239,-46.654314,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[-23.588574,-46.676052,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-busstop.png', iconSize: [32, 37] })"},null]},{"method":"polyline","args":[[[{"lng":[-46.634657,-46.634723,-46.634962,-46.635034,-46.635314,-46.635416,-46.635529,-46.635935,-46.636064,-46.63615,-46.63619,-46.636245,-46.636285,-46.636312,-46.636423,-46.636624,-46.63666,-46.636578,-46.636544,-46.636346,-46.636205,-46.635825,-46.635667,-46.635456,-46.634287,-46.634701,-46.635005,-46.635796,-46.63598,-46.636256,-46.637145,-46.638025,-46.638505,-46.638759,-46.638982,-46.639424,-46.63983,-46.640283,-46.6408,-46.640999,-46.641596,-46.642142,-46.64244,-46.643153,-46.645673,-46.646171,-46.646266,-46.646594,-46.646907,-46.647234,-46.647856,-46.647909,-46.648031,-46.648249,-46.648699,-46.648898,-46.649337,-46.650413,-46.651022,-46.652152,-46.6526,-46.653252,-46.65334,-46.654294,-46.654768,-46.655173,-46.655756,-46.656263,-46.656892,-46.657083,-46.657256,-46.657571,-46.658284,-46.659048,-46.660589,-46.66118,-46.661816,-46.662471,-46.663442,-46.664655,-46.664982,-46.665213,-46.667051,-46.667195,-46.668543,-46.66985,-46.6708,-46.671217,-46.671297,-46.671319,-46.671203,-46.671013,-46.670885,-46.670732,-46.670698,-46.670619,-46.670452,-46.670449,-46.670124,-46.670094,-46.67005,-46.670073,-46.670138,-46.670203,-46.670282,-46.670366,-46.670718,-46.671342,-46.671786,-46.672347,-46.67296,-46.673076,-46.673718,-46.67466,-46.675032,-46.67598,-46.676101,-46.67642,-46.677528,-46.678443,-46.679188,-46.680436,-46.680382,-46.680227,-46.680094,-46.679956,-46.679806,-46.679652,-46.679382,-46.679212,-46.679124,-46.680167,-46.680383,-46.682197,-46.682823,-46.682909,-46.682971,-46.683273,-46.684074,-46.685755,-46.685976,-46.687282,-46.687711,-46.688156,-46.689006,-46.690228,-46.690692,-46.689511,-46.688174,-46.687797,-46.686888,-46.6864,-46.685427,-46.684448,-46.683465,-46.682768,-46.681489,-46.681058,-46.679239,-46.677606,-46.67708,-46.676239,-46.674671,-46.674942,-46.675148,-46.675365,-46.67568,-46.676113,-46.676534,-46.676626,-46.676687,-46.676754,-46.676826,-46.676886,-46.676934,-46.677012,-46.677523,-46.67763,-46.678115,-46.678748,-46.679547,-46.679817,-46.679758,-46.680199,-46.680315,-46.6804,-46.680418,-46.680427,-46.680424,-46.680416,-46.680404,-46.680378,-46.680356,-46.680337,-46.680313,-46.680272,-46.68023,-46.680188,-46.680118,-46.680059],"lat":[-23.53557,-23.535554,-23.535496,-23.535478,-23.535409,-23.535382,-23.535906,-23.537868,-23.53857,-23.538848,-23.539,-23.539227,-23.53944,-23.539617,-23.540183,-23.541313,-23.541523,-23.541606,-23.541642,-23.542911,-23.542687,-23.541591,-23.541125,-23.541036,-23.541377,-23.542005,-23.542409,-23.543577,-23.543929,-23.544425,-23.545871,-23.547029,-23.547876,-23.548192,-23.548498,-23.548771,-23.548849,-23.548957,-23.549041,-23.549073,-23.54916,-23.549427,-23.549606,-23.549988,-23.551076,-23.551242,-23.55128,-23.551425,-23.551593,-23.55188,-23.552932,-23.553282,-23.553513,-23.55392,-23.554623,-23.554887,-23.555322,-23.556123,-23.556476,-23.557181,-23.557476,-23.557941,-23.558002,-23.559179,-23.559887,-23.560443,-23.561408,-23.562388,-23.563952,-23.564507,-23.565015,-23.565513,-23.566266,-23.567047,-23.56862,-23.569233,-23.569891,-23.570558,-23.57124,-23.572086,-23.572317,-23.572489,-23.573891,-23.573983,-23.574977,-23.57586,-23.576587,-23.57686,-23.576919,-23.576989,-23.577713,-23.578847,-23.579798,-23.580993,-23.581161,-23.581723,-23.583253,-23.58329,-23.583391,-23.583723,-23.584027,-23.584217,-23.584142,-23.584114,-23.584104,-23.58413,-23.585017,-23.585187,-23.585359,-23.585597,-23.585943,-23.586012,-23.586407,-23.587493,-23.587846,-23.588654,-23.588787,-23.589061,-23.589373,-23.589614,-23.589822,-23.590165,-23.590333,-23.590812,-23.591239,-23.591658,-23.592119,-23.592619,-23.593452,-23.593983,-23.594256,-23.594543,-23.5946,-23.595092,-23.595268,-23.595268,-23.595251,-23.595175,-23.595322,-23.59569,-23.595749,-23.596101,-23.595911,-23.595717,-23.595313,-23.594747,-23.595691,-23.596227,-23.596843,-23.597019,-23.597443,-23.59767,-23.598116,-23.598568,-23.599022,-23.599343,-23.599929,-23.600128,-23.600972,-23.601728,-23.601971,-23.602359,-23.603112,-23.604069,-23.604678,-23.605263,-23.60605,-23.607129,-23.607905,-23.607974,-23.608003,-23.608023,-23.608036,-23.608032,-23.608017,-23.607977,-23.607654,-23.607544,-23.607128,-23.605656,-23.604089,-23.603695,-23.603056,-23.602611,-23.602785,-23.602905,-23.602943,-23.602976,-23.603022,-23.603049,-23.603071,-23.603103,-23.603125,-23.603138,-23.603151,-23.603164,-23.603166,-23.603163,-23.603151,-23.603138]}]],null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#CC9900","weight":2,"opacity":0.8,"fill":false,"fillColor":null,"fillOpacity":0.2,"dashArray":null,"smoothFactor":1.2,"noClip":false},null]},{"method":"marker","args":[[-23.58664225,-23.590332375,-23.542847,-23.589824875,-23.53641,-23.5029715,-23.5894965,-23.57679175],[-46.6772115,-46.68844975,-46.635301625,-46.68827475,-46.6340954375,-46.626045,-46.688153,-46.67111275],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/1-bus.png', iconSize: [32, 37] })"},null]},{"method":"marker","args":[[-23.602453125,-23.58306175,-23.542435125],[-46.676043,-46.670472875,-46.63642025],null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250,"icon":"L.icon({ iconUrl: 'https://raw.githubusercontent.com/jtrecenti/sptrans/master/inst/icons/2-bus.png', iconSize: [32, 37] })"},null]}],"limits":{"lat":[-23.608036,-23.502893],"lng":[-46.690692,-46.625926]},"fitBounds":[-23.5585974,-46.6539853,-23.5870167,-46.6746184]},"evals":["calls.5.args.3.icon","calls.6.args.3.icon","calls.8.args.3.icon","calls.9.args.3.icon","calls.11.args.3.icon","calls.12.args.3.icon"]}</script><!--/html_preserve-->

## TODO

- Previsão de chegada de ônibus nos pontos.
- Melhorar documentação e dat @export em mais funções.
- Adicionar testes e tratamento de exceções.
- Se tiver alguma sugestão ou uma pull request, adicione um issue na 
[página do github](https://github.com/jtrecenti/sptrans).

## Known Issues

- Não trabalha bem com trips no GTFS. Difícil colocar paths somente de "ida" e
não de "volta".

## Agradecimentos

- A Hadley Wickham, que fez um 
[tutorial muito útil](https://github.com/hadley/httr/blob/master/vignettes/api-packages.Rmd)
para criação pacotes no R baseados em API's, e por contribuir no fantástico
pacote `ggmap`.
