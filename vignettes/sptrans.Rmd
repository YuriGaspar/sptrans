---
title: "SPTrans no R!"
author: "Julio Trecenti"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{SPTrans no R!}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

A SPTrans nasceu em 1995 e é hoje responsável por quase todo o sistema de
transporte no município de São Paulo. Como São Paulo é o município mais
populoso do Brasil (e o 
[sétimo do mundo!](http://pt.wikipedia.org/wiki/Lista_das_cidades_mais_populosas_do_mundo))
, o desafio é bem grande.

A SPTrans também mantém uma das API's mais divertidas de São Paulo, o OlhoVivo.
Com essa API é possível extrair informações em tempo real da localização
de todos os ônibus, previsões de chegada, etc. Além disso, ela utiliza os
padrões [GTFS](http://www.sptrans.com.br/desenvolvedores/GTFS.aspx) para 
organizar informações sobre as linhas ativas, os pontos de ônibus e tudo mais.

Hoje em dia, temos diversos aplicativos mobile e sites que usam essa API.
Faça uma busca por "sptrans" na Google Play, por exemplo, e verá muitos
apps que ajudam a planejar rotas de ônibus.

E por que não brincar com essas informações no R? Bom, pensando nisso fiz esse
pacote, que ajuda a configurar a API, baixar os dados da SPTrans em tempo real
e criar alguns gráficos básicos usando o pacote 
[`leaflet` do RStudio](https://rstudio.github.io/leaflet/).

## Instalando o pacote

O pacote ainda não está disponível no CRAN. Para instalar via GitHub, você
precisará do pacote devtools e rodar

```{r eval=FALSE}
devtools::install_github('jtrecenti/sptrans')
```

Carregue o pacote com o comando `library` 

```{r}
library(sptrans)
```

## Utilizando a API OlhoVivo

Para acessar a API OlhoVivo, você precisará primeiro de um _token_ de acesso,
que é uma sequência de letras e números geradas aleatoriamente pela SPTrans,
por exemplo:

```
233f343e2ad2a3bf483eae00c316cfdd516c3xxxd21b6a3e916645877e137b6f
```



## Criando visualizações

## Analisando os dados do GTFS

## Shiny app

## Agradecimentos

A Hadley Wickham, que fez um 
[tutorial muito útil](https://github.com/hadley/httr/blob/master/vignettes/api-packages.Rmd)
para criação de API's.
